const scarletPkm = ['Sprigatito','Floragato','Meowscarada','Fuecoco','Crocalor','Skeledirge','Quaxly','Quaxwell','Quaquaval','Lechonk','Oinkologne','Tarountula','Spidops','Nymble','Lokix','Hoppip','Skiploom','Jumpluff','Fletchling','Fletchinder','Talonflame','Pawmi','Pawmo','Pawmot','Houndour','Houndoom','Yungoos','Gumshoos','Skwovet','Greedent','Sunkern','Sunflora','Kricketot','Kricketune','Scatterbug','Spewpa','Vivillon','Combee','Vespiquen','Rookidee','Corvisquire','Corviknight','Happiny','Chansey','Blissey','Azurill','Marill','Azumarill','Surskit','Masquerain','Buizel','Floatzel','Wooper','Clodsire','Psyduck','Golduck','Chewtle','Drednaw','Igglybuff','Jigglypuff','Wigglytuff','Ralts','Kirlia','Gardevoir','Gallade','Drowzee','Hypno','Gastly','Haunter','Gengar','Tandemaus','Maushold','Pichu','Pikachu','Raichu','Fidough','Dachsbun','Slakoth','Vigoroth','Slaking','Bounsweet','Steenee','Tsareena','Smoliv','Dolliv','Arboliva','Bonsly','Sudowoodo','Rockruff','Lycanroc','Rolycoly','Carkol','Coalossal','Shinx','Luxio','Luxray','Starly','Staravia','Staraptor','Oricorio','Mareep','Flaaffy','Ampharos','Petilil','Lilligant','Shroomish','Breloom','Applin','Flapple','Appletun','Spoink','Grumpig','Squawkabilly','Misdreavus','Mismagius','Makuhita','Hariyama','Crabrawler','Crabominable','Salandit','Salazzle','Phanpy','Donphan','Cufant','Copperajah','Gible','Gabite','Garchomp','Nacli','Naclstack','Garganacl','Wingull','Pelipper','Magikarp','Gyarados','Arrokuda','Barraskewda','Basculin','Gulpin','Swalot','Meowth','Persian','Drifloon','Drifblim','Flabebe','Floette','Florges','Diglett','Dugtrio','Torkoal','Numel','Camerupt','Bronzor','Bronzong','Axew','Fraxure','Haxorus','Mankey','Primeape','Annihilape','Meditite','Medicham','Riolu','Lucario','Charcadet','Armarouge','Ceruledge','Barboach','Whiscash','Tadbulb','Bellibolt','Goomy','Sliggoo','Goodra','Croagunk','Toxicroak','Wattrel','Kilowattrel','Eevee','Vaporeon','Jolteon','Flareon','Espeon','Umbreon','Leafeon','Glaceon','Sylveon','Dunsparce','Dudunsparce','Deerling','Sawsbuck','Girafarig','Farigiraf','Grimer','Muk','Maschiff','Mabosstiff','Toxel','Toxtricity','Dedenne','Pachirisu','Shroodle','Grafaiai','Stantler','Foongus','Amoonguss','Voltorb','Electrode','Magnemite','Magneton','Magnezone','Ditto','Growlithe','Arcanine','Teddiursa','Ursaring','Zangoose','Seviper','Swablu','Altaria','Skiddo','Gogoat','Tauros','Litleo','Pyroar','Stunky','Skuntank','Zorua','Zoroark','Sneasel','Weavile','Murkrow','Honchkrow','Gothita','Gothorita','Gothitelle','Sinistea','Polteageist','Mimikyu','Klefki','Indeedee','Bramblin','Brambleghast','Toedscool','Toedscruel','Tropius','Fomantis','Lurantis','Klawf','Capsakid','Scovillain','Cacnea','Cacturne','Rellor','Rabsca','Venonat','Venomoth','Pineco','Forretress','Scyther','Scizor','Heracross','Flittle','Espathra','Hippopotas','Hippowdon','Sandile','Krokorok','Krookodile','Silicobra','Sandaconda','Mudbray','Mudsdale','Larvesta','Volcarona','Bagon','Shelgon','Salamence','Tinkatink','Tinkatuff','Tinkaton','Hatenna','Hattrem','Hatterene','Impidimp','Morgrem','Grimmsnarl','Wiglett','Wugtrio','Bombirdier','Finizen','Palafin','Varoom','Revavroom','Cyclizar','Orthworm','Sableye','Shuppet','Banette','Falinks','Hawlucha','Spiritomb','Noibat','Noivern','Dreepy','Drakloak','Dragapult','Glimmet','Glimmora','Rotom','Greavard','Houndstone','Oranguru','Passimian','Komala','Larvitar','Pupitar','Tyranitar','Stonjourner','Eiscue','Pincurchin','Sandygast','Palossand','Slowpoke','Slowbro','Slowking','Shellos','Gastrodon','Shellder','Cloyster','Qwilfish','Luvdisc','Finneon','Lumineon','Bruxish','Alomomola','Skrelp','Dragalge','Clauncher','Clawitzer','Tynamo','Eelektrik','Eelektross','Mareanie','Toxapex','Flamigo','Dratini','Dragonair','Dragonite','Snom','Frosmoth','Snover','Abomasnow','Delibird','Cubchoo','Beartic','Snorunt','Glalie','Froslass','Cryogonal','Cetoddle','Cetitan','Bergmite','Avalugg','Rufflet','Braviary','Pawniard','Bisharp','Kingambit','Deino','Zweilous','Hydreigon','Veluza','Dondozo','Tatsugiri','GreatTusk','ScreamTail','BruteBonnet','FlutterMane','SlitherWing','SandyShocks','IronTreads','IronBundle','IronHands','IronJugulis','IronMoth','IronThorns','Frigibax','Arctibax','Baxcalibur','Gimmighoul','Gholdengo','Wo-Chien','Chien-Pao','Ting-Lu','Chi-Yu','RoaringMoon','IronValiant','Koraidon','Miraidon','Bulbasaur','Ivysaur','Venusaur','Charmander','Charmeleon','Charizard','Squirtle','Wartortle','Blastoise','Ekans','Arbok','Sandshrew','Sandslash','Clefairy','Clefable','Vulpix','Ninetales','Oddish','Gloom','Vileplume','Poliwag','Poliwhirl','Poliwrath','Bellsprout','Weepinbell','Victreebel','Tentacool','Tentacruel','Geodude','Graveler','Golem','Doduo','Dodrio','Seel','Dewgong','Exeggcute','Exeggutor','Hitmonlee','Hitmonchan','Koffing','Weezing','Rhyhorn','Rhydon','Horsea','Seadra','Electabuzz','Magmar','Lapras','Porygon','Snorlax','Chikorita','Bayleef','Meganium','Cyndaquil','Quilava','Typhlosion','Totodile','Croconaw','Feraligatr','Sentret','Furret','Hoothoot','Noctowl','Spinarak','Ariados','Chinchou','Lanturn','Cleffa','Bellossom','Politoed','Aipom','Yanma','Wooper','Quagsire','Gligar','Snubbull','Granbull','Slugma','Magcargo','Swinub','Piloswine','Skarmory','Kingdra','Porygon2','Smeargle','Tyrogue','Hitmontop','Elekid','Magby','Treecko','Grovyle','Sceptile','Torchic','Combusken','Blaziken','Mudkip','Marshtomp','Swampert','Poochyena','Mightyena','Lotad','Lombre','Ludicolo','Seedot','Nuzleaf','Shiftry','Nosepass','Plusle','Minun','Volbeat','Illumise','Trapinch','Vibrava','Flygon','Corphish','Crawdaunt','Feebas','Milotic','Duskull','Dusclops','Chimecho','Beldum','Metang','Metagross','Turtwig','Grotle','Torterra','Chimchar','Monferno','Infernape','Piplup','Prinplup','Empoleon','Cranidos','Rampardos','Shieldon','Bastiodon','Ambipom','Chingling','Munchlax','Rhyperior','Electivire','Magmortar','Yanmega','Gliscor','Mamoswine','Porygon-Z','Probopass','Dusknoir','Blitzle','Zebstrika','Drilbur','Excadrill','Timburr','Gurdurr','Conkeldurr','Sewaddle','Swadloon','Leavanny','Cottonee','Whimsicott','Scraggy','Scrafty','Minccino','Cinccino','Solosis','Duosion','Reuniclus','Ducklett','Swanna','Joltik','Galvantula','Litwick','Lampent','Chandelure','Mienfoo','Mienshao','Golett','Golurk','Vullaby','Mandibuzz','Espurr','Meowstic','Inkay','Malamar','Phantump','Trevenant','Rowlet','Dartrix','Decidueye','Litten','Torracat','Incineroar','Popplio','Brionne','Primarina','Pikipek','Trumbeak','Toucannon','Grubbin','Charjabug','Vikavolt','Cutiefly','Ribombee','Dewpider','Araquanid','Comfey','Minior','Jangmo-o','Hakamo-o','Kommo-o','Cramorant','Milcery','Alcremie','Morpeko','Duraludon','Wyrdeer','Kleavor','Ursaluna','Basculegion','Sneasler','Overqwil','Enamorus'];

const legendsArceusPkm = ['Rowlet','Dartrix','Decidueye','Cyndaquil','Quilava','Typhlosion','Oshawott','Dewott','Samurott','Bidoof','Bibarel','Starly','Staravia','Staraptor','Shinx','Luxio','Luxray','Wurmple','Silcoon','Beautifly','Cascoon','Dustox','Ponyta','Rapidash','Eevee','Vaporeon','Jolteon','Flareon','Espeon','Umbreon','Leafeon','Glaceon','Sylveon','Zubat','Golbat','Crobat','Drifloon','Drifblim','Kricketot','Kricketune','Buizel','Floatzel','Burmy','Wormadam','Mothim','Geodude','Graveler','Golem','Stantler','Wyrdeer','Munchlax','Snorlax','Paras','Parasect','Pichu','Pikachu','Raichu','Abra','Kadabra','Alakazam','Chimchar','Monferno','Infernape','Buneary','Lopunny','Cherubi','Cherrim','Psyduck','Golduck','Combee','Vespiquen','Scyther','Kleavor','Scizor','Heracross','439','Mr.Mime','Aipom','Ambipom','Magikarp','Gyarados','Shellos','Gastrodon','Qwilfish','Overqwil','Happiny','Chansey','Blissey','Budew','Roselia','Roserade','Carnivine','Petilil','Lilligant','Tangela','Tangrowth','Barboach','Whiscash','Croagunk','Toxicroak','Ralts','Kirlia','Gardevoir','Gallade','Yanma','Yanmega','Hippopotas','Hippowdon','Pachirisu','Stunky','Skuntank','Teddiursa','Ursaring','Ursaluna','Goomy','Sliggoo','Goodra','Onix','Steelix','Rhyhorn','Rhydon','Rhyperior','Bonsly','Sudowoodo','Lickitung','Lickilicky','Togepi','Togetic','Togekiss','Turtwig','Grotle','Torterra','Porygon','Porygon2','Porygon-Z','Gastly','Haunter','Gengar','Spiritomb','Murkrow','Honchkrow','Unown','Spheal','Sealeo','Walrein','Remoraid','Octillery','Skorupi','Drapion','Growlithe','Arcanine','Glameow','Purugly','Machop','Machoke','Machamp','Chatot','Duskull','Dusclops','Dusknoir','Piplup','Prinplup','Empoleon','Mantyke','Mantine','Basculin','Basculegion','Vulpix','Ninetales','Tentacool','Tentacruel','Finneon','Lumineon','Magby','Magmar','Magmortar','Magnemite','Magneton','Magnezone','Bronzor','Bronzong','Elekid','Electabuzz','Electivire','Gligar','Gliscor','Gible','Gabite','Garchomp','Nosepass','Probopass','Voltorb','Electrode','Rotom','Chingling','Chimecho','Misdreavus','Mismagius','Cleffa','Clefairy','Clefable','Sneasel','Sneasler','Weavile','Snorunt','Glalie','Froslass','Cranidos','Rampardos','Shieldon','Bastiodon','Swinub','Piloswine','Mamoswine','Bergmite','Avalugg','Snover','Abomasnow','Zorua','Zoroark','Rufflet','Braviary','Riolu','Lucario','Uxie','Mesprit','Azelf','Heatran','Regigigas','Cresselia','Tornadus','Thundurus','Landorus','Enamorus','Dialga','Palkia','Giratina','Arceus','Phione','Manaphy','Shaymin','Darkrai'];

const diamondPkm = ['Turtwig','Grotle','Torterra','Chimchar','Monferno','Infernape','Piplup','Prinplup','Empoleon','Starly','Staravia','Staraptor','Bidoof','Bibarel','Kricketot','Kricketune','Shinx','Luxio','Luxray','Abra','Kadabra','Alakazam','Magikarp','Gyarados','Budew','Roselia','Roserade','Zubat','Golbat','Crobat','Geodude','Graveler','Golem','Onix','Steelix','Cranidos','Rampardos','Shieldon','Bastiodon','Machop','Machoke','Machamp','Psyduck','Golduck','Burmy','Wormadam','Mothim','Wurmple','Silcoon','Beautifly','Cascoon','Dustox','Combee','Apireine','Pachirisu','Buizel','Floatzel','Cherubi','Cherrim','Shellos','Gastrodon','Heracross','Aipom','Ambipom','Drifloon','Drifblim','Buneary','Lopunny','Gastly','Haunter','Gengar','Misdreavus','Mismagius','Murkrow','Honchkrow','Glameow','Purugly','Goldeen','Seaking','Barboach','Whiscash','Chingling','Chimecho','Stunky','Skuntank','Meditite','Medicham','Bronzor','Bronzong','Ponyta','Rapidash','Bonsly','Sudowoodo','439','Mr.Mime','Happiny','Chansey','Blissey','Cleffa','Clefairy','Clefable','Chatot','Pichu','Pikachu','Raichu','Hoothoot','Noctowl','Spiritomb','Gible','Gabite','Garchomp','Munchlax','Snorlax','Unown','Riolu','Lucario','Wooper','Quagsire','Wingull','Pelipper','Girafarig','Hippopotas','Hippodocus','Azurill','Marill','Azumarill','Skorupi','Drapion','Croagunk','Toxicroak','Carnivine','Remoraid','Octillery','Finneon','Lumineon','Tentacool','Tentacruel','Feebas','Milotic','Mantyke','Mantine','Snover','Abomasnow','Sneasel','Weavile','Uxie','Mesprit','Azelf','Dialga','Palkia','Manaphy'];


let selectedGame = 'Scarlet and Violet';

// h2 title
const selectedGameTitle = document.querySelector(".selectedGame");
selectedGameTitle.innerText = selectedGame;

const getGameForm = document.getElementById("getGameForm");

getGameForm.addEventListener("submit", (SubmitEvent) => {
    SubmitEvent.preventDefault();
    let selectedGame = document.querySelector('input[name="gameInput"]:checked').value;
    switch (selectedGame) {
        case "legendsArceus":
            selectedGameTitle.innerText = "Legends of Arceus";
            loadCollection(legendsArceusPkm);
        break;

        case "diamondPearl":
            selectedGameTitle.innerText = "Brilliant Diamond & Shining Pearl";
            loadCollection(diamondPkm);

        break;

        default:
             selectedGameTitle.innerText = "Scarlet & Violet";
             loadCollection(scarletPkm);
        break;
    }

});

loadCollection(scarletPkm);

function loadCollection(collection) {
    const myCollectionSection = document.getElementById('pokemon-list');
    myCollectionSection.innerHTML = ''; // Clear existing content before loading new collection

    let fetchPromises = collection.map(selectedPkm => {
        return fetch('https://tyradex.tech/api/v1/pokemon/' + selectedPkm)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok ' + response.statusText);
                }
                return response.json();
            });
    });

    Promise.all(fetchPromises)
        .then(pokemons => {
            // pokemons array will be in the same order as the collection array
            pokemons.forEach(myShinyPokemon => {
                const pokeId = myShinyPokemon.pokedex_id;
                let currentCount = parseInt(localStorage.getItem(pokeId)) || 0; // Parse as integer

                // Create list item for the Pok√©mon
                const listItem = document.createElement('li');
                listItem.innerHTML = `
                    <div class="sprite-bg">
                        <div class="middle-round-pkball"></div>
                        <div class="middle-sep-pkball"></div>
                        <img class="pkmn-sprite" src="${myShinyPokemon.sprites.shiny || myShinyPokemon.sprites.regular}" alt="${myShinyPokemon.name.fr}">
                    </div>
                    <br>
                    <b>#${pokeId}</b><br>
                    <b>${myShinyPokemon.name.en}</b> <i>FR: ${myShinyPokemon.name.fr}</i><br>
                    <div>
                        <img src="${myShinyPokemon.types[0].image}" alt="type" class="pkmn-type">
                        ${myShinyPokemon.types[1] ? `<img src="${myShinyPokemon.types[1].image}" alt="type" class="pkmn-type"><br>` : ''}
                    </div>
                    <div class="pkm-collection">
                        <button class="addPokemon" id="addPokemon${pokeId}"><i class="bi bi-plus-circle"></i></button>
                        <span class="countPokemon" id="countPokemon${pokeId}">x${currentCount}</span>
                        <button class="deletePokemon" id="deletePokemon${pokeId}"><i class="bi bi-dash-circle"></i></button>
                    </div>
                `;
                myCollectionSection.appendChild(listItem);

                // Add event listener for Add Pokemon button
                const addPokemonButton = listItem.querySelector(`#addPokemon${pokeId}`);
                addPokemonButton.addEventListener('click', () => {
                    currentCount++;
                    localStorage.setItem(pokeId, currentCount);
                    listItem.querySelector(`#countPokemon${pokeId}`).innerText = `x${currentCount}`;
                });

                // Add event listener for Delete Pokemon button
                const deletePokemonButton = listItem.querySelector(`#deletePokemon${pokeId}`);
                deletePokemonButton.addEventListener('click', () => {
                    if (currentCount > 0) {
                        currentCount--;
                        localStorage.setItem(pokeId, currentCount);
                        listItem.querySelector(`#countPokemon${pokeId}`).innerText = `x${currentCount}`;
                    }
                });
            });
        })
        .catch(error => {
            console.error('There has been a problem with your fetch operation:', error);
        });
}
